---
phase: 05-llm-content-pipeline
plan: 02
type: execute
depends_on: ["05-01"]
files_modified: [src/_data/llm/prompts.js]
---

<objective>
Create prompt templates for Korean product review generation.

Purpose: Craft prompts that generate compelling, SEO-friendly Korean reviews that convert readers to affiliate clicks.
Output: Prompt module with system prompt, user prompt builder, and content formatting.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/05-llm-content-pipeline/DISCOVERY.md
@.planning/phases/05-llm-content-pipeline/05-01-SUMMARY.md
@src/posts/sample-product-review.md

**Target output structure (from sample):**
- 제품 소개 (Product Introduction)
- 장점 (Pros) - with H3 subheadings
- 단점 (Cons) - honest limitations
- 총평 (Overall) - with 추천/비추천 대상

**Key considerations:**
- Korean language throughout
- Markdown formatting
- 500-800 words target length
- Conversion-focused but trustworthy tone
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create prompt templates module</name>
  <files>src/_data/llm/prompts.js</files>
  <action>
Create ES module with prompt templates:

**SYSTEM_PROMPT constant:**
```
당신은 한국의 신뢰받는 제품 리뷰어입니다. 쿠팡에서 판매되는 제품에 대한 상세하고 솔직한 리뷰를 작성합니다.

작성 스타일:
- 친근하고 대화하듯이 작성하세요
- 직접 사용해본 것처럼 자연스럽게 작성하세요
- 장점과 단점을 균형있게 다루세요
- 구매 결정에 도움이 되는 실용적인 정보를 포함하세요

형식:
- 마크다운 형식으로 작성
- 총 500-800 단어
- 각 섹션에 적절한 제목(##, ###) 사용
```

**buildUserPrompt(product) function:**
- Takes product object: { name, price, category, description }
- Returns formatted user prompt requesting review with specific sections:
  - ## 제품 소개
  - ## 장점 (3-4개, 각각 ### 소제목)
  - ## 단점 (1-2개, 솔직하게)
  - ## 총평 (추천/비추천 대상 포함)
- Include price in Korean won format
- Include category context

**buildMetaDescription(product) function:**
- Takes product object
- Returns prompt for generating SEO meta description (150자 이내)

**formatReviewOutput(content) function:**
- Takes raw LLM output
- Strips any leading/trailing whitespace
- Ensures consistent heading hierarchy
- Returns cleaned markdown string

Export all functions and SYSTEM_PROMPT constant.
  </action>
  <verify>node -e "import('./src/_data/llm/prompts.js').then(m => console.log(m.buildUserPrompt({name:'테스트 제품', price:99000, category:'electronics'})))"</verify>
  <done>prompts.js exports SYSTEM_PROMPT, buildUserPrompt, buildMetaDescription, formatReviewOutput</done>
</task>

<task type="auto">
  <name>Task 2: Update index.js to include prompts</name>
  <files>src/_data/llm/index.js</files>
  <action>
Update index.js to re-export prompt functions:

Add imports:
- Import from ./prompts.js: SYSTEM_PROMPT, buildUserPrompt, buildMetaDescription, formatReviewOutput

Add re-exports for all prompt functions.

Add new convenience function `generateReview(product)`:
- Uses SYSTEM_PROMPT and buildUserPrompt internally
- Calls generateProductReview from gemini.js
- Applies formatReviewOutput to result
- Returns final markdown content string

This becomes the main entry point for content generation.
  </action>
  <verify>node -e "import('./src/_data/llm/index.js').then(m => console.log(Object.keys(m)))"</verify>
  <done>index.js exports all prompt functions plus generateReview convenience function</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `src/_data/llm/prompts.js` exists with all functions
- [ ] SYSTEM_PROMPT is in Korean and sets reviewer role
- [ ] buildUserPrompt produces Korean prompt with product data
- [ ] index.js exports generateReview function
- [ ] All modules import without errors
- [ ] `npm run build` succeeds
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Prompt templates ready for integration with post generation (Plan 05-03)
</success_criteria>

<output>
After completion, create `.planning/phases/05-llm-content-pipeline/05-02-SUMMARY.md`
</output>
