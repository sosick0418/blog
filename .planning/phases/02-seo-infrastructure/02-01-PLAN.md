---
phase: 02-seo-infrastructure
plan: 01
type: execute
depends_on: []
files_modified: [src/_includes/base.njk, src/_data/site.json]
---

<objective>
Add comprehensive meta tags and Open Graph markup for social sharing and SEO.

Purpose: Enable proper social media previews when content is shared on Facebook, Twitter, KakaoTalk (critical for Korean market), and improve search engine understanding of content.
Output: Enhanced base.njk template with Open Graph, Twitter Cards, and canonical URL meta tags.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/_includes/base.njk
@src/_data/site.json

**Tech stack available:**
- 11ty v3.1.2 (ES modules)
- Nunjucks templating
- Korean language (ko_KR locale)

**Constraining decisions:**
- Phase 01-02: Layouts in _includes/, site data in _data/site.json
- Phase 01-02: Template uses `{{ description or site.description }}` pattern
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update site.json with SEO fields</name>
  <files>src/_data/site.json</files>
  <action>
Add required fields to site.json:
- "url": Base URL placeholder (empty string for now, will be set when domain known)
- "image": Default OG image path ("/assets/og-default.jpg" - placeholder)
- "twitter": Twitter handle (empty string placeholder)
- "type": "website" (default Open Graph type)

Keep existing fields (title, description, language, locale, author).
Use empty strings for placeholders that need real values later - do NOT invent values.
  </action>
  <verify>cat src/_data/site.json | jq . (valid JSON)</verify>
  <done>site.json contains url, image, twitter, type fields</done>
</task>

<task type="auto">
  <name>Task 2: Add Open Graph and Twitter Card meta tags to base.njk</name>
  <files>src/_includes/base.njk</files>
  <action>
Add meta tags to head section of base.njk, after existing description meta:

**Open Graph tags:**
- og:title - Use page title or site title
- og:description - Use page description or site description
- og:type - "article" for posts, "website" for pages (use variable with default)
- og:url - Canonical URL (use page.url with site.url)
- og:locale - site.locale ("ko_KR")
- og:site_name - site.title
- og:image - Use page.image or site.image

**Twitter Card tags:**
- twitter:card - "summary_large_image"
- twitter:title - Same as og:title
- twitter:description - Same as og:description
- twitter:image - Same as og:image
- twitter:site - site.twitter (only if set)

**Canonical URL:**
- Add <link rel="canonical" href="..."> using site.url + page.url

**Implementation notes:**
- Use Nunjucks conditionals to only render twitter:site if site.twitter is not empty
- Use {{ site.url }}{{ page.url }} for canonical (page.url provided by 11ty)
- Order: existing meta tags, then OG tags, then Twitter tags, then canonical link
  </action>
  <verify>npm run build && grep -c "og:title" _site/index.html (should be 1)</verify>
  <done>base.njk contains Open Graph, Twitter Card meta tags, and canonical link</done>
</task>

<task type="auto">
  <name>Task 3: Verify meta tags render correctly</name>
  <files>_site/index.html</files>
  <action>
Run build and verify the generated HTML:
1. Run npm run build
2. Check _site/index.html contains all expected meta tags
3. Verify Korean content renders correctly (not escaped)
4. Verify og:locale is "ko_KR"
5. Verify canonical URL is present

If any issues, fix base.njk template.
  </action>
  <verify>npm run build && head -30 _site/index.html</verify>
  <done>Build succeeds, index.html contains all OG and Twitter meta tags with Korean content</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] _site/index.html contains og:title, og:description, og:locale meta tags
- [ ] _site/index.html contains twitter:card, twitter:title meta tags
- [ ] _site/index.html contains canonical link
- [ ] Korean text renders correctly (not HTML-escaped)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Open Graph tags present for social sharing
- Twitter Card tags present
- Canonical URL implemented
- No errors or warnings introduced
</success_criteria>

<output>
After completion, create `.planning/phases/02-seo-infrastructure/02-01-SUMMARY.md`
</output>
