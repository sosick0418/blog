{
  "name": "Content Pipeline v3 (AI + Image Scraping)",
  "nodes": [
    {
      "parameters": {},
      "id": "trigger-manual",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [200, 400]
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * *"
            }
          ]
        }
      },
      "id": "trigger-schedule",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [200, 600],
      "disabled": true
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "productId",
              "value": ""
            },
            {
              "name": "name",
              "value": ""
            },
            {
              "name": "category",
              "value": "electronics"
            },
            {
              "name": "affiliateUrl",
              "value": ""
            },
            {
              "name": "productFeatures",
              "value": ""
            }
          ],
          "number": [
            {
              "name": "price",
              "value": 0
            },
            {
              "name": "rating",
              "value": 4.5
            }
          ],
          "boolean": [
            {
              "name": "autoDeploy",
              "value": true
            },
            {
              "name": "dryRun",
              "value": false
            },
            {
              "name": "fetchImage",
              "value": true
            }
          ]
        }
      },
      "id": "set-product-data",
      "name": "ğŸ“ ì œí’ˆ ì •ë³´ ì…ë ¥",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [420, 500],
      "notes": "=== ì œí’ˆ ì •ë³´ ì…ë ¥ ===\n\n1. productId: ì¿ íŒ¡ ìƒí’ˆ ID (URLì—ì„œ ì¶”ì¶œ)\n2. name: ì œí’ˆëª… (í•œê¸€)\n3. category: electronics | home | beauty\n4. affiliateUrl: ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬\n5. price: ê°€ê²© (ìˆ«ìë§Œ)\n6. productFeatures: ì£¼ìš” íŠ¹ì§• (ì½¤ë§ˆë¡œ êµ¬ë¶„)\n7. rating: í‰ì  (1-5, ì†Œìˆ˜ì  ê°€ëŠ¥)\n8. fetchImage: ì´ë¯¸ì§€ ìë™ ê°€ì ¸ì˜¤ê¸° (true/false)"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "check-fetch-image",
              "leftValue": "={{ $json.fetchImage }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "if-fetch-image",
      "name": "ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [640, 500]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $json.affiliateUrl }}",
        "options": {
          "redirect": {
            "redirect": {
              "followRedirects": true,
              "maxRedirects": 5
            }
          },
          "response": {
            "response": {
              "fullResponse": true,
              "responseFormat": "text"
            }
          }
        }
      },
      "id": "fetch-coupang-page",
      "name": "ğŸ” ì¿ íŒ¡ í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [860, 400],
      "continueOnFail": true,
      "notes": "ì¿ íŒ¡ affiliate URLì—ì„œ ìƒí’ˆ í˜ì´ì§€ HTMLì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\nì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰ë©ë‹ˆë‹¤."
    },
    {
      "parameters": {
        "jsCode": "// Extract image URL from Coupang page HTML\nconst input = $input.first().json;\nconst originalData = $('ğŸ“ ì œí’ˆ ì •ë³´ ì…ë ¥').first().json;\nlet imageUrl = '';\n\ntry {\n  const html = input.body || '';\n  \n  // Try multiple patterns to find product image\n  const patterns = [\n    // Open Graph image\n    /<meta\\s+property=\"og:image\"\\s+content=\"([^\"]+)\"/i,\n    /<meta\\s+content=\"([^\"]+)\"\\s+property=\"og:image\"/i,\n    // Product image in data\n    /\"imageUrl\"\\s*:\\s*\"([^\"]+coupangcdn[^\"]+)\"/i,\n    // Main product image\n    /class=\"prod-image\"[^>]*src=\"([^\"]+)\"/i,\n    // Thumbnail\n    /thumbnail[^>]*src=\"([^\"]+coupangcdn[^\"]+)\"/i\n  ];\n  \n  for (const pattern of patterns) {\n    const match = html.match(pattern);\n    if (match && match[1]) {\n      imageUrl = match[1];\n      // Ensure HTTPS\n      if (imageUrl.startsWith('//')) {\n        imageUrl = 'https:' + imageUrl;\n      }\n      break;\n    }\n  }\n} catch (error) {\n  console.log('Image extraction failed:', error.message);\n}\n\n// Generate placeholder if no image found\nif (!imageUrl) {\n  const encodedName = encodeURIComponent(originalData.name);\n  imageUrl = `https://placehold.co/600x600/1e293b/94a3b8?text=${encodedName}`;\n}\n\nreturn [{\n  json: {\n    ...originalData,\n    imageUrl: imageUrl,\n    imageSource: imageUrl.includes('coupangcdn') ? 'coupang' : 'placeholder'\n  }\n}];"
      },
      "id": "extract-image",
      "name": "ğŸ–¼ï¸ ì´ë¯¸ì§€ URL ì¶”ì¶œ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1080, 400],
      "notes": "HTMLì—ì„œ Open Graph ì´ë¯¸ì§€ ë˜ëŠ” ìƒí’ˆ ì´ë¯¸ì§€ URLì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\nì‹¤íŒ¨ì‹œ placeholder ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤."
    },
    {
      "parameters": {
        "jsCode": "// Skip image fetch - use placeholder\nconst input = $input.first().json;\nconst encodedName = encodeURIComponent(input.name);\n\nreturn [{\n  json: {\n    ...input,\n    imageUrl: `https://placehold.co/600x600/1e293b/94a3b8?text=${encodedName}`,\n    imageSource: 'placeholder'\n  }\n}];"
      },
      "id": "skip-image-fetch",
      "name": "Placeholder ì‚¬ìš©",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [860, 600]
    },
    {
      "parameters": {},
      "id": "merge-image-data",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [1300, 500],
      "parameters_": {
        "mode": "combine",
        "options": {}
      }
    },
    {
      "parameters": {
        "jsCode": "// Build professional review prompt for Gemini\nconst input = $input.first().json;\n\nconst categoryMap = {\n  'electronics': 'ê°€ì „/ë””ì§€í„¸',\n  'home': 'ìƒí™œ/ê°€êµ¬',\n  'beauty': 'ë·°í‹°',\n  'fashion': 'íŒ¨ì…˜'\n};\n\nconst categoryName = categoryMap[input.category] || input.category;\nconst priceStr = input.price.toLocaleString();\n\nconst prompt = `ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ì „ë¬¸ ì œí’ˆ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. IT/ê°€ì „ ì „ë¬¸ ë§¤ì²´ì—ì„œ ì¼í•˜ë©°, ìˆ˜ì²œ ê±´ì˜ ì œí’ˆ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì˜¨ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤.\n\në‹¤ìŒ ì œí’ˆì— ëŒ€í•´ **ì‹¤ì œ ì‚¬ìš© ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ê²ƒì²˜ëŸ¼** ì „ë¬¸ì ì´ê³  ìƒì„¸í•œ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\n\n---\n## ì œí’ˆ ì •ë³´\n- **ì œí’ˆëª…**: ${input.name}\n- **ì¹´í…Œê³ ë¦¬**: ${categoryName}\n- **ê°€ê²©**: ${priceStr}ì›\n- **ì£¼ìš” íŠ¹ì§•**: ${input.productFeatures || '(ì •ë³´ ì—†ìŒ)'}\n- **í‰ì **: ${input.rating}/5ì \n\n---\n## ì‘ì„± ê°€ì´ë“œë¼ì¸\n\n### 1. ì œí’ˆ ì†Œê°œ (250ì ì´ìƒ)\n- ì´ ì œí’ˆì´ ì‹œì¥ì—ì„œ ì–´ë–¤ ìœ„ì¹˜ì— ìˆëŠ”ì§€\n- ì–´ë–¤ ì‚¬ìš©ìë¥¼ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ”ì§€\n- ê²½ìŸ ì œí’ˆêµ° ëŒ€ë¹„ íŠ¹ì§•\n\n### 2. ë””ìì¸ ë° ë¹Œë“œ í€„ë¦¬í‹° (200ì ì´ìƒ)\n- ì™¸ê´€ ë””ìì¸ í‰ê°€\n- ë§ˆê° í’ˆì§ˆ\n- íœ´ëŒ€ì„± ë˜ëŠ” ì„¤ì¹˜ í¸ì˜ì„±\n\n### 3. í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸ ë¶„ì„ (ê° ê¸°ëŠ¥ë³„ 150ì ì´ìƒ)\n- ì£¼ìš” ìŠ¤í™ë³„ ì‹¤ì‚¬ìš© ì²´ê°\n- ê´‘ê³  ë¬¸êµ¬ì™€ ì‹¤ì œ ì„±ëŠ¥ ë¹„êµ\n- ìˆ¨ê²¨ì§„ ì¥ì ì´ë‚˜ ì•„ì‰¬ìš´ ì \n\n### 4. ì‹¤ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ (300ì ì´ìƒ)\n- êµ¬ì²´ì ì¸ ì‚¬ìš© ìƒí™© ì˜ˆì‹œ\n- ì¼ì£¼ì¼ ì‚¬ìš© í›„ê¸° í˜•ì‹\n- ì¼ìƒì—ì„œì˜ í™œìš©ë„\n\n### 5. ê²½ìŸ ì œí’ˆ ë¹„êµ (200ì ì´ìƒ)\n- ë¹„ìŠ·í•œ ê°€ê²©ëŒ€ ì œí’ˆê³¼ ë¹„êµ\n- ì´ ì œí’ˆë§Œì˜ ì°¨ë³„ì \n- ë‹¤ë¥¸ ì œí’ˆì„ ì„ íƒí•´ì•¼ í•˜ëŠ” ê²½ìš°\n\n### 6. ê°€ì„±ë¹„ ë¶„ì„ (150ì ì´ìƒ)\n- ${priceStr}ì›ì˜ ê°€ì¹˜ê°€ ìˆëŠ”ê°€\n- ê°€ê²© ëŒ€ë¹„ ë§Œì¡±ë„\n- ì„¸ì¼/í”„ë¡œëª¨ì…˜ êµ¬ë§¤ ì¶”ì²œ ì—¬ë¶€\n\n### 7. ì¶”ì²œ ëŒ€ìƒ & ë¹„ì¶”ì²œ ëŒ€ìƒ\n- ì´ ì œí’ˆì´ ë”± ë§ëŠ” ì‚¬ëŒ\n- ë‹¤ë¥¸ ì œí’ˆì„ ê³ ë ¤í•´ì•¼ í•  ì‚¬ëŒ\n\n### 8. ìµœì¢… í‰ê°€ (200ì ì´ìƒ)\n- ì¢…í•© ì ìˆ˜ì˜ ê·¼ê±°\n- êµ¬ë§¤ ê¶Œì¥ ì—¬ë¶€\n- í•œ ì¤„ ìš”ì•½\n\n---\n## ì¶œë ¥ í˜•ì‹ (JSON)\n\në‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì •í™•íˆ ì‘ë‹µí•´ì£¼ì„¸ìš”:\n\n\\`\\`\\`json\n{\n  \"description\": \"60ì ì´ë‚´ì˜ í•œ ì¤„ ì œí’ˆ ì„¤ëª… (í•µì‹¬ íŠ¹ì§• ê°•ì¡°)\",\n  \"specs\": [\n    {\"label\": \"ìŠ¤í™ëª…1\", \"value\": \"ìŠ¤í™ê°’1\"},\n    {\"label\": \"ìŠ¤í™ëª…2\", \"value\": \"ìŠ¤í™ê°’2\"},\n    {\"label\": \"ìŠ¤í™ëª…3\", \"value\": \"ìŠ¤í™ê°’3\"},\n    {\"label\": \"ìŠ¤í™ëª…4\", \"value\": \"ìŠ¤í™ê°’4\"},\n    {\"label\": \"ìŠ¤í™ëª…5\", \"value\": \"ìŠ¤í™ê°’5\"}\n  ],\n  \"pros\": [\n    \"êµ¬ì²´ì ì¸ ì¥ì  1 (20ì ì´ìƒ)\",\n    \"êµ¬ì²´ì ì¸ ì¥ì  2\",\n    \"êµ¬ì²´ì ì¸ ì¥ì  3\",\n    \"êµ¬ì²´ì ì¸ ì¥ì  4\"\n  ],\n  \"cons\": [\n    \"ì†”ì§í•œ ë‹¨ì  1\",\n    \"ì†”ì§í•œ ë‹¨ì  2\"\n  ],\n  \"content\": \"## ì œí’ˆ ì†Œê°œ\\\\n\\\\n(ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ì „ì²´ ë¦¬ë·° ë³¸ë¬¸...)\"\n}\n\\`\\`\\`\n\n---\n## ì¤‘ìš” ì§€ì¹¨\n- ê³¼ì¥ëœ ê´‘ê³  ë¬¸êµ¬ ê¸ˆì§€ (\"í˜ì‹ ì \", \"ìµœê³ ì˜\" ë“±)\n- êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ì™€ ë¹„êµ ì‚¬ìš©\n- ë‹¨ì ë„ ì†”ì§í•˜ê²Œ ì–¸ê¸‰\n- ì‹¤ì œ ì‚¬ìš©ì ê´€ì  ìœ ì§€\n- ë§ˆí¬ë‹¤ìš´ ## í—¤ë”©ìœ¼ë¡œ ì„¹ì…˜ êµ¬ë¶„`;\n\nreturn [{\n  json: {\n    ...input,\n    geminiPrompt: prompt\n  }\n}];"
      },
      "id": "build-prompt",
      "name": "ğŸ¤– AI í”„ë¡¬í”„íŠ¸ ìƒì„±",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1520, 500],
      "notes": "ì „ë¬¸ ë¦¬ë·°ì–´ í˜ë¥´ì†Œë‚˜ì™€ ìƒì„¸í•œ ê°€ì´ë“œë¼ì¸ì´ í¬í•¨ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤."
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contents\": [{\n    \"parts\": [{\n      \"text\": {{ JSON.stringify($json.geminiPrompt) }}\n    }]\n  }],\n  \"generationConfig\": {\n    \"temperature\": 0.8,\n    \"topK\": 40,\n    \"topP\": 0.95,\n    \"maxOutputTokens\": 8192,\n    \"responseMimeType\": \"application/json\"\n  }\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          },
          "timeout": 60000
        }
      },
      "id": "gemini-request",
      "name": "âœ¨ Gemini AI ë¦¬ë·° ìƒì„±",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1740, 500],
      "credentials": {
        "httpQueryAuth": {
          "id": "gemini-api-key",
          "name": "Gemini API Key"
        }
      },
      "notes": "Gemini 2.0 Flashë¡œ ì „ë¬¸ì ì¸ ë¦¬ë·° ìƒì„±\n\nâš™ï¸ Credential ì„¤ì •:\n1. HTTP Query Auth ìƒì„±\n2. Name: 'key'\n3. Value: Google AI Studioì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤"
    },
    {
      "parameters": {
        "jsCode": "// Parse and validate Gemini AI response\nconst input = $input.first().json;\nconst originalData = $('ğŸ¤– AI í”„ë¡¬í”„íŠ¸ ìƒì„±').first().json;\nlet aiContent;\n\ntry {\n  const responseText = input.body?.candidates?.[0]?.content?.parts?.[0]?.text;\n  \n  if (!responseText) {\n    throw new Error('Empty Gemini response');\n  }\n  \n  // Clean JSON if wrapped in code blocks\n  let cleanJson = responseText.trim();\n  if (cleanJson.startsWith('```json')) {\n    cleanJson = cleanJson.slice(7);\n  }\n  if (cleanJson.startsWith('```')) {\n    cleanJson = cleanJson.slice(3);\n  }\n  if (cleanJson.endsWith('```')) {\n    cleanJson = cleanJson.slice(0, -3);\n  }\n  \n  aiContent = JSON.parse(cleanJson.trim());\n  \n  // Validate required fields\n  if (!aiContent.content || !aiContent.specs || !aiContent.pros) {\n    throw new Error('Missing required fields in AI response');\n  }\n  \n} catch (error) {\n  console.error('AI parsing error:', error.message);\n  \n  // Fallback content\n  aiContent = {\n    description: `${originalData.name} - í’ˆì§ˆê³¼ ê°€ì„±ë¹„ë¥¼ ê°–ì¶˜ ì¶”ì²œ ì œí’ˆ`,\n    specs: [\n      { label: 'ì¹´í…Œê³ ë¦¬', value: originalData.category },\n      { label: 'ê°€ê²©ëŒ€', value: `${originalData.price.toLocaleString()}ì›` },\n      { label: 'í‰ì ', value: `${originalData.rating}/5` },\n      { label: 'ë°°ì†¡', value: 'ë¡œì¼“ë°°ì†¡ ê°€ëŠ¥' }\n    ],\n    pros: [\n      'ê²€ì¦ëœ í’ˆì§ˆ',\n      'í•©ë¦¬ì ì¸ ê°€ê²©',\n      'ë¹ ë¥¸ ë°°ì†¡',\n      'ì¢‹ì€ ì‚¬ìš©ì í‰ê°€'\n    ],\n    cons: [\n      'ì¸ê¸° ìƒí’ˆìœ¼ë¡œ ì¼ì‹œ í’ˆì ˆ ê°€ëŠ¥'\n    ],\n    content: `## ì œí’ˆ ì†Œê°œ\\n\\n${originalData.name}ì€(ëŠ”) ë§ì€ ì‚¬ìš©ìë“¤ì—ê²Œ ì‚¬ë‘ë°›ëŠ” ì œí’ˆì…ë‹ˆë‹¤. ê°€ê²© ëŒ€ë¹„ ìš°ìˆ˜í•œ í’ˆì§ˆë¡œ ë†’ì€ ë§Œì¡±ë„ë¥¼ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.\\n\\n## ì£¼ìš” íŠ¹ì§•\\n\\n${originalData.productFeatures || 'ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.'}\\n\\n## ì´í‰\\n\\n${originalData.rating}/5ì ì˜ í‰ì ì´ ë§í•´ì£¼ë“¯, ì´ ì œí’ˆì€ ì¶©ë¶„íˆ êµ¬ë§¤ ê°€ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ê°€ì„±ë¹„ë¥¼ ì¤‘ì‹œí•˜ëŠ” ë¶„ë“¤ê»˜ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.`\n  };\n}\n\n// Build final product data\nconst productData = {\n  productId: originalData.productId,\n  name: originalData.name,\n  price: originalData.price,\n  imageUrl: originalData.imageUrl,\n  category: originalData.category,\n  affiliateUrl: originalData.affiliateUrl,\n  rating: originalData.rating,\n  description: aiContent.description,\n  specs: aiContent.specs,\n  pros: aiContent.pros,\n  cons: aiContent.cons,\n  content: aiContent.content,\n  autoDeploy: originalData.autoDeploy,\n  dryRun: originalData.dryRun,\n  _meta: {\n    aiGenerated: true,\n    imageSource: originalData.imageSource,\n    generatedAt: new Date().toISOString()\n  }\n};\n\nreturn [{ json: productData }];"
      },
      "id": "parse-ai-response",
      "name": "ğŸ“‹ AI ì‘ë‹µ íŒŒì‹±",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1960, 500],
      "notes": "Gemini ì‘ë‹µì„ íŒŒì‹±í•˜ê³  ì œí’ˆ ë°ì´í„° êµ¬ì¡°ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\nì‹¤íŒ¨ì‹œ ê¸°ë³¸ ì½˜í…ì¸ ë¡œ í´ë°±í•©ë‹ˆë‹¤."
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://content-api:3001/api/products",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify($json) }}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "create-product",
      "name": "ğŸ’¾ ì œí’ˆ ì €ì¥ (API)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2180, 500],
      "notes": "Content APIë¡œ ì œí’ˆ ë°ì´í„° ì „ì†¡\n\nAPI ì‘ì—…:\n1. products.jsonì— ì €ì¥\n2. autoDeploy=trueë©´ Git ì»¤ë°‹ & í‘¸ì‹œ\n3. GitHub Actionsê°€ ë°°í¬ ì‹¤í–‰"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "check-success",
              "leftValue": "={{ $json.body?.success || $json.statusCode === 201 }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "if-success",
      "name": "ì„±ê³µ í™•ì¸",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [2400, 500]
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nconst product = response.body?.product || {};\n\nconst slugName = product.name?.replace(/\\s+/g, '-') || 'unknown';\nconst previewUrl = `https://bichonhenry.cloud/review/${encodeURIComponent(slugName)}/`;\n\nreturn [{\n  json: {\n    status: 'âœ… ì„±ê³µ',\n    message: `AI ë¦¬ë·°ê°€ ìƒì„±ë˜ì–´ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤!`,\n    product: {\n      id: product.productId,\n      name: product.name,\n      category: product.category,\n      price: product.price\n    },\n    aiGenerated: true,\n    previewUrl: previewUrl,\n    note: 'GitHub Actions ë°°í¬ ì™„ë£Œê¹Œì§€ ì•½ 2ë¶„ ì†Œìš”',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "success-output",
      "name": "âœ… ì„±ê³µ ê²°ê³¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2620, 400]
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json;\nlet errorMessage = 'Unknown error';\n\ntry {\n  if (input.body?.error) {\n    errorMessage = input.body.message || input.body.error;\n  } else if (input.statusCode && input.statusCode >= 400) {\n    errorMessage = `HTTP ${input.statusCode}: ${input.statusMessage || 'Request failed'}`;\n  }\n} catch (e) {\n  errorMessage = 'Failed to parse error response';\n}\n\nreturn [{\n  json: {\n    status: 'âŒ ì‹¤íŒ¨',\n    error: errorMessage,\n    statusCode: input.statusCode,\n    troubleshooting: [\n      'productIdê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸',\n      'Content API ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸',\n      'í•„ìˆ˜ í•„ë“œ(name, price, category)ê°€ ëª¨ë‘ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸'\n    ],\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "error-output",
      "name": "âŒ ì—ëŸ¬ ê²°ê³¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2620, 600]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [[{"node": "ğŸ“ ì œí’ˆ ì •ë³´ ì…ë ¥", "type": "main", "index": 0}]]
    },
    "Schedule Trigger": {
      "main": [[{"node": "ğŸ“ ì œí’ˆ ì •ë³´ ì…ë ¥", "type": "main", "index": 0}]]
    },
    "ğŸ“ ì œí’ˆ ì •ë³´ ì…ë ¥": {
      "main": [[{"node": "ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°?", "type": "main", "index": 0}]]
    },
    "ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°?": {
      "main": [
        [{"node": "ğŸ” ì¿ íŒ¡ í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°", "type": "main", "index": 0}],
        [{"node": "Placeholder ì‚¬ìš©", "type": "main", "index": 0}]
      ]
    },
    "ğŸ” ì¿ íŒ¡ í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°": {
      "main": [[{"node": "ğŸ–¼ï¸ ì´ë¯¸ì§€ URL ì¶”ì¶œ", "type": "main", "index": 0}]]
    },
    "ğŸ–¼ï¸ ì´ë¯¸ì§€ URL ì¶”ì¶œ": {
      "main": [[{"node": "Merge", "type": "main", "index": 0}]]
    },
    "Placeholder ì‚¬ìš©": {
      "main": [[{"node": "Merge", "type": "main", "index": 1}]]
    },
    "Merge": {
      "main": [[{"node": "ğŸ¤– AI í”„ë¡¬í”„íŠ¸ ìƒì„±", "type": "main", "index": 0}]]
    },
    "ğŸ¤– AI í”„ë¡¬í”„íŠ¸ ìƒì„±": {
      "main": [[{"node": "âœ¨ Gemini AI ë¦¬ë·° ìƒì„±", "type": "main", "index": 0}]]
    },
    "âœ¨ Gemini AI ë¦¬ë·° ìƒì„±": {
      "main": [[{"node": "ğŸ“‹ AI ì‘ë‹µ íŒŒì‹±", "type": "main", "index": 0}]]
    },
    "ğŸ“‹ AI ì‘ë‹µ íŒŒì‹±": {
      "main": [[{"node": "ğŸ’¾ ì œí’ˆ ì €ì¥ (API)", "type": "main", "index": 0}]]
    },
    "ğŸ’¾ ì œí’ˆ ì €ì¥ (API)": {
      "main": [[{"node": "ì„±ê³µ í™•ì¸", "type": "main", "index": 0}]]
    },
    "ì„±ê³µ í™•ì¸": {
      "main": [
        [{"node": "âœ… ì„±ê³µ ê²°ê³¼", "type": "main", "index": 0}],
        [{"node": "âŒ ì—ëŸ¬ ê²°ê³¼", "type": "main", "index": 0}]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "meta": {
    "instanceId": "techblog-ai-pipeline-v3"
  },
  "tags": [
    {"name": "gemini-ai"},
    {"name": "image-scraping"},
    {"name": "production-ready"}
  ]
}
